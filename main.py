import streamlit as st
from PIL import Image
import folium
from streamlit_folium import st_folium

# 장소별 위도/경도 정보
place_coords = {
    "카페거리 (연남동)": [37.5660, 126.9237],
    "홍대 프린트베이커리": [37.5563, 126.9258],
    "디뮤지엄 (성수)": [37.5464, 127.0550],
    "성수 카페거리": [37.5447, 127.0565],
    "서울숲": [37.5444, 127.0370],
    "씨네큐 성수": [37.5442, 127.0547],
    "책읽는 공간 위트앤시니컬": [37.5625, 126.9369],
    "서울책보고": [37.5383, 127.0017],
    "이화 벽화마을": [37.5774, 127.0036],
    "혜화 시집서점": [37.5822, 127.0025],
    "성수동 서울숲길 마켓": [37.5462, 127.0422],
    "언더스탠드 에비뉴": [37.5433, 127.0465],
    "대학로 소극장 거리": [37.5825, 127.0021],
    "낙산공원": [37.5796, 127.0079],
    "홍대 걷고싶은 거리": [37.5573, 126.9245],
    "홍대 프리마켓": [37.5571, 126.9229],
    "롯데월드": [37.5110, 127.0980],
    "석촌호수 레스토랑": [37.5109, 127.1042],
    "더클라이밍 홍대": [37.5565, 126.9225],
    "비건식당 러빙헛": [37.5562, 126.9270],
    "코엑스 아쿠아리움": [37.5125, 127.0592],
    "국립과천과학관": [37.4337, 126.9966],
    "망리단길": [37.5496, 126.9114],
    "서울시립천문대": [37.6039, 127.1043],
    "홍대 VR파크": [37.5553, 126.9239],
    "삼성전자 홍대 플래그십": [37.5551, 126.9234],
    "반포 한강공원": [37.5123, 126.9956],
    "세빛섬 갤러리": [37.5209, 126.9905],
    "서울랜드": [37.4355, 127.0096],
    "남문시장": [37.4352, 127.0176],
    "용산 국립중앙박물관": [37.5230, 126.9804],
    "한남동 레스토랑": [37.5270, 127.0008]
}

# 임시 MBTI 데이터 (NameError 방지용)
mbti_matches = dict(sorted({
    "ENFJ": {"match": "INFP", "reason": "서로에 대한 공감 능력이 뛰어나 따뜻한 관계를 유지합니다.", "date": "소극장 연극 & 야경 산책 🎭🌃", "places": ["대학로 소극장 거리", "낙산공원"]},
    "ENFP": {"match": "INTJ", "reason": "INTJ의 깊은 사고력과 ENFP의 창의성은 훌륭한 시너지를 냅니다.", "date": "보드게임 카페 & 벼룩시장 🧩🛒", "places": ["홍대 걷고싶은 거리", "홍대 프리마켓"]},
    "ENTJ": {"match": "INFP", "reason": "INFP의 감성적인 배려가 ENTJ의 열정과 잘 어우러집니다.", "date": "공원 산책 & 감성 영화관 🎬🌳", "places": ["서울숲", "씨네큐 성수"]},
    "ENTP": {"match": "INFJ", "reason": "INFJ의 이상주의와 ENTP의 에너지가 깊이 있는 소통을 가능하게 합니다.", "date": "북토크 & 즉흥 여행 📚✈️", "places": ["책읽는 공간 위트앤시니컬", "서울책보고"]},
    "ESFJ": {"match": "INTP", "reason": "ESFJ의 감정 표현력과 INTP의 분석력이 서로를 자극합니다.", "date": "맛집 투어 & 별자리 관측 🌌🍜", "places": ["망리단길", "서울시립천문대"]},
    "ESFP": {"match": "ISTJ", "reason": "ISTJ의 안정감이 ESFP의 감정 표현을 잘 수용합니다.", "date": "박물관 & 고급 다이닝 데이트 🏺🍽️", "places": ["용산 국립중앙박물관", "한남동 레스토랑"]},
    "ESTJ": {"match": "ISFP", "reason": "ESTJ의 조직력과 ISFP의 부드러움이 균형을 이룹니다.", "date": "아쿠아리움 & 자연사 박물관 🐠🏛️", "places": ["코엑스 아쿠아리움", "국립과천과학관"]},
    "ESTP": {"match": "ISFJ", "reason": "ISFJ의 따뜻함과 ESTP의 모험심이 잘 어울립니다.", "date": "카트레이싱 & 야시장 구경 🏎️🌮", "places": ["서울랜드", "남문시장"]},
    "INFJ": {"match": "ENFP", "reason": "감성과 이상을 추구하는 INFJ에게 ENFP의 따뜻함이 큰 위로가 됩니다.", "date": "시집 낭독회 & 벽화마을 데이트 🎨📖", "places": ["이화 벽화마을", "혜화 시집서점"]},
    "INFP": {"match": "ENTJ", "reason": "INFP의 이상주의와 ENTJ의 추진력이 좋은 균형을 이룹니다.", "date": "감성 카페 & 마켓 구경 ☕🛍️", "places": ["성수동 서울숲길 마켓", "언더스탠드 에비뉴"]},
    "INTJ": {"match": "ENFP", "reason": "ENFP의 따뜻함과 창의력이 INTJ의 계획적인 성향을 보완해줍니다.", "date": "아날로그 감성 북카페 & 창작 공방 체험 📚🎨", "places": ["카페거리 (연남동)", "홍대 프린트베이커리"]},
    "INTP": {"match": "ESFJ", "reason": "ESFJ의 사교성과 따뜻함이 INTP의 내향적 성향에 활력을 줍니다.", "date": "전시회 데이트 & 디저트 카페 🍰🖼️", "places": ["디뮤지엄 (성수)", "성수 카페거리"]},
    "ISFJ": {"match": "ESTP", "reason": "ISFJ의 배려심과 ESTP의 활기찬 성격이 조화를 이룹니다.", "date": "실내 암벽등반 & 건강식 디너 🧗🥗", "places": ["더클라이밍 홍대", "비건식당 러빙헛"]},
    "ISFP": {"match": "ESTJ", "reason": "ESTJ의 결단력과 ISFP의 감수성이 잘 맞습니다.", "date": "한강 피크닉 & 갤러리 데이트 🍱🖌️", "places": ["반포 한강공원", "세빛섬 갤러리"]},
    "ISTJ": {"match": "ESFP", "reason": "ESFP의 즉흥성과 ISTJ의 책임감이 상호 보완됩니다.", "date": "테마파크 & 저녁 파스타 데이트 🎢🍝", "places": ["롯데월드", "석촌호수 레스토랑"]},
    "ISTP": {"match": "ENFJ", "reason": "ENFJ의 따뜻한 관심이 ISTP의 조용한 성향을 끌어냅니다.", "date": "VR 체험 & 플래너 만들기 🎮📓", "places": ["홍대 VR파크", "삼성전자 홍대 플래그십"]},
}.items()))
